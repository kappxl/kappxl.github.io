(self["webpackChunkfoodbase_app"]=self["webpackChunkfoodbase_app"]||[]).push([[64],{7691:(e,t,o)=>{function a(e){let t;try{if("Invalid Date"==e)throw new Error("Invalid Date");t=`${e.getFullYear()}/${i(e.getMonth()+1,2)}/${i(e.getDate(),2)}`}catch(o){let e=new Date;t=`${e.getFullYear()}/${i(e.getMonth()+1,2)}/${i(e.getDate(),2)}`}return t}function n(e){if("object"===typeof e)return`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`;if("number"===typeof e)return`day-${e}`;throw new Error("Selected day is invalid! type: "+typeof e+e)}function i(e,t,o){var a="undefined"!==typeof o?o:"0",n=new Array(1+t).join(a);return(n+e).slice(-n.length)}o(6701),e.exports={dateToQDate:a,dayToStorageDate:n}},3448:(e,t,o)=>{const{saveCategoryToDb:a,deleteCategoryFromDb:n,getCategoriesFromDb:i,getCategoryByIdFromDb:l}=o(9628);async function r({id:e,name:t,user:o,color:n,food:i}){return a({id:e,name:t,user:o,color:n,foodIds:i.map((e=>e.id))})}async function s(e){return n({id:e})}async function c(){return i()}async function d(e){return l({id:e})}e.exports={saveCategory:r,deleteCategoryById:s,getCategories:c,getCategoryById:d}},3152:(e,t,o)=>{o(71);const{getFoodByType:a,getFoodById:n,getFoodByName:i,getFoodByIdsFromDb:l,getIngredientByMacros:r,saveFood:s,deleteFoodById:c}=o(1447);async function d(e){let t=[];for(let o of e){let e=await n(o.id);e&&(e.quantity=o.quantity,t.push(e))}return F(t)}async function u({id:e}){let t=await n(e),o=await F([t]);return o.length>0?o[0]:null}async function p(e){let t=await l(e);return F(t)}async function y(){return a({type:"ingredient"})}async function f(){let e=await a({type:"meal"});return F(e)}async function g(e){let t=await i({name:e,type:"ingredient"});return t.length>0?t[0]:null}async function m(e){let t=await i({name:e,type:"meal"});const o=await F(t);return o.length>0?o[0]:null}async function h(e){const t=await r(e.macros);return t.length>0?t[0].name:null}async function v({id:e,name:t,user:o,macros:a,unit:n={name:"gr",value:1},default_quantity:i="100"}){return n.value=parseFloat(n.value),s({id:e,name:t,user:o,macros:a,type:"ingredient",unit:n,default_quantity:parseFloat(i)})}async function w({id:e,name:t,user:o,ingredients:a}){let n={kcal:0,protein:0,carbs:0,fat:0};for(let i of a)i.quantity=parseFloat(i.quantity),i.default_quantity=parseFloat(i.default_quantity),i.unit.value=parseFloat(i.unit.value),n.kcal+=i.macros.kcal*(i.quantity*(i.unit.value/100)),n.protein+=i.macros.protein*(i.quantity*(i.unit.value/100)),n.carbs+=i.macros.carbs*(i.quantity*(i.unit.value/100)),n.fat+=i.macros.fat*(i.quantity*(i.unit.value/100));return s({id:e,name:t,user:o,ingredients:a.map((e=>({id:e.id,quantity:e.quantity}))),macros:n,type:"meal"})}async function b({id:e}){return c(e)}async function q({id:e}){let t=await a({type:"meal"});for(let o of t)o.ingredients.find((t=>t.id==e))&&(o.ingredients=o.ingredients.filter((t=>t.id!=e)),await w(o));return c(e)}async function F(e){let t=[];for(let o of e){let e=[];if(o.ingredients){for(let t of o.ingredients){let o=await n(t.id);o&&(t.quantity&&(o.quantity=t.quantity),e.push(o))}o.ingredients=e}t.push(o)}return t}e.exports={getFoodFromQuantityList:d,getFood:u,getFoodByIds:p,getIngredients:y,getMeals:f,getIngredientByName:g,getMealByName:m,similarIngredientExists:h,saveIngredient:v,saveMeal:w,deleteFood:b,deleteFoodFromAllMeals:q}},9045:e=>{const t="foodbaseTest",o=1;async function a(){return new Promise(((e,a)=>{let n=window.indexedDB.open(t,o);n.onerror=e=>{console.log("Failed to open Database!",e),a("Failed to open Database!")},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{console.log("Create new DB.");let t=e.target.result;if(e.oldVersion<2){let e=t.createObjectStore("food",{keyPath:"id"});e.createIndex("id","id",{unique:!0}),e.createIndex("type","type",{unique:!1}),e.createIndex("user","user",{unique:!1});let o=t.createObjectStore("categories",{keyPath:"id"});o.createIndex("id","id",{unique:!0})}console.log("DB Created.")}}))}async function n(){return new Promise(((e,o)=>{const a=window.indexedDB.deleteDatabase(t);a.onerror=e=>{o("Failed to delete Database!")},a.onsuccess=t=>{e(t.result)}}))}e.exports={getDb:a,deleteDb:n}},9628:(e,t,o)=>{const{getDb:a}=o(9045),{v4:n}=o(574);async function i(e){let t;try{return t=await a(),new Promise(((o,a)=>{let i=t.transaction(["categories"],"readwrite");i.oncomplete=e=>{o()},i.onerror=e=>{console.log(e)};let l=i.objectStore("categories");e.id||(e.id=n()),l.put(e)}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function l({id:e}){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["categories"],"readwrite");n.oncomplete=e=>{o()},n.onerror=e=>{console.log(e)};let i=n.objectStore("categories");i.delete(e)}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function r(){let e;try{return e=await a(),new Promise(((t,o)=>{let a=e.transaction(["categories"],"readonly");a.oncomplete=e=>{t(i)},a.onerror=e=>{console.log(e)};let n=a.objectStore("categories"),i=[];n.openCursor().onsuccess=e=>{let t=e.target.result;t&&(i.push(t.value),t.continue())}}))}catch(t){return console.log("Failed to open DB."),[]}finally{e.close()}}async function s({id:e}){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["categories"],"readonly");n.oncomplete=e=>{o(l)},n.onerror=e=>{console.log(e)};let i=n.objectStore("categories"),l=[];i.openCursor().onsuccess=t=>{let o=t.target.result;o&&(o.value.id===e&&l.push(o.value),o.continue())}}))}catch(o){return console.log("Failed to open DB."),[]}finally{t.close()}}e.exports={saveCategoryToDb:i,deleteCategoryFromDb:l,getCategoriesFromDb:r,getCategoryByIdFromDb:s}},1447:(e,t,o)=>{const{getDb:a}=o(9045),{v4:n}=o(574);async function i({type:e}){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["food"],"readonly");n.oncomplete=e=>{o(s)},n.onerror=e=>{console.log(e)};let i=n.objectStore("food"),l=i.index("type"),r=e?IDBKeyRange.only(e):null,s=[];l.openCursor(r).onsuccess=e=>{let t=e.target.result;t&&(s.push(t.value),t.continue())}}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function l(e){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["food"],"readonly");n.oncomplete=e=>{l.length>0?o(l[0]):o(null)},n.onerror=e=>{console.log(e)};let i=n.objectStore("food"),l=[];i.openCursor().onsuccess=t=>{let o=t.target.result;o&&(o.value.id===e&&l.push(o.value),o.continue())}}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function r({id:e,type:t}){let o;try{return o=await a(),new Promise(((a,n)=>{let i=o.transaction(["food"],"readonly");i.oncomplete=e=>{a(c)},i.onerror=e=>{console.log(e)};let l=i.objectStore("food"),r=l.index("type"),s=t?IDBKeyRange.only(t):null,c=[];r.openCursor(s).onsuccess=t=>{let o=t.target.result;o&&(o.value.id===e&&c.push(o.value),o.continue())}}))}catch(n){console.log("Failed to open DB.")}finally{o.close()}}async function s(e){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["food"],"readonly");n.oncomplete=e=>{o(l)},n.onerror=e=>{console.log(e)};let i=n.objectStore("food"),l=[];i.openCursor().onsuccess=t=>{let o=t.target.result;o&&(e.includes(o.value.id)&&l.push(o.value),o.continue())}}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function c({name:e,type:t}){let o;try{return o=await a(),new Promise(((a,n)=>{let i=o.transaction(["food"],"readonly");i.oncomplete=e=>{a(c)},i.onerror=e=>{console.log(e)};let l=i.objectStore("food"),r=l.index("type"),s=t?IDBKeyRange.only(t):null,c=[];r.openCursor(s).onsuccess=t=>{let o=t.target.result;o&&(o.value.name.toLowerCase()===e.toLowerCase()&&c.push(o.value),o.continue())}}))}catch(n){console.log("Failed to open DB.")}finally{o.close()}}async function d(e){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["food"],"readonly");n.oncomplete=e=>{o(s)},n.onerror=e=>{console.log(e)};let i=n.objectStore("food"),l=i.index("type"),r=IDBKeyRange.only("ingredient"),s=[];l.openCursor(r).onsuccess=t=>{let o=t.target.result;if(o){let t=o.value.macros;t.kcal===e.kcal&&t.protein===e.protein&&t.carbs===e.carbs&&t.fat===e.fat&&s.push(o.value),o.continue()}}}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function u(e){let t;try{return t=await a(),new Promise(((o,a)=>{let i=t.transaction(["food"],"readwrite");i.oncomplete=e=>{o()},i.onerror=e=>{console.log(e)};let l=i.objectStore("food");e.id||(e.id=n()),l.put(e)}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}async function p(e){let t;try{return t=await a(),new Promise(((o,a)=>{let n=t.transaction(["food"],"readwrite");n.oncomplete=e=>{o()},n.onerror=e=>{console.log(e)};let i=n.objectStore("food");i.delete(e)}))}catch(o){console.log("Failed to open DB.")}finally{t.close()}}e.exports={getFoodByType:i,getFoodById:l,getFoodByIdAndType:r,getFoodByIdsFromDb:s,getFoodByName:c,getIngredientByMacros:d,saveFood:u,deleteFoodById:p}},2221:(e,t,o)=>{o(2100);const{getFoodFromQuantityList:a}=o(3152);function n({storageDay:e,food:t,quantity:o}){var a=JSON.parse(localStorage.getItem(e)||"[]");let n=a.findIndex((e=>e.id===t.id));-1===n?a.push({quantity:parseFloat(o),id:t.id}):a[n].quantity=parseFloat(a[n].quantity)+parseFloat(o),localStorage.setItem(e,JSON.stringify(a))}async function i({storageDay:e}){var t=JSON.parse(localStorage.getItem(e)||"[]");return a(t)}function l({storageDay:e,food:t}){var o=JSON.parse(localStorage.getItem(e)||"[]"),a=o.filter((e=>!(e.id===t.id)));localStorage.setItem(e,JSON.stringify(a))}function r({storageDay:e}){localStorage.setItem(e,JSON.stringify([]))}function s(e){let t=e.map((e=>({id:e.id,quantity:e.quantity})));return localStorage.setItem("fb-clipboard",JSON.stringify(t))}async function c(){var e=JSON.parse(localStorage.getItem("fb-clipboard")||"[]");return a(e)}e.exports={addFoodToDay:n,getFoodFromDay:i,removeFoodFromDay:l,clearDay:r,setClipboard:s,getClipboard:c}},952:(e,t,o)=>{"use strict";o.d(t,{Z:()=>j});var a=o(3673),n=o(2323);const i=e=>((0,a.dD)("data-v-dcdc1f0c"),e=e(),(0,a.Cn)(),e),l={style:{"text-align":"center"}},r={class:"row nutri-goal-container"},s={style:{display:"flex","flex-basis":"0"}},c={class:"nutri-goal-is"},d={class:"opacity-5"},u={class:"row nutri-goal-container"},p=i((()=>(0,a._)("span",{class:"nutrition-display-hint"},"protein",-1))),y={class:"nutri-goal-is"},f={class:"opacity-5"},g={class:"row nutri-goal-container"},m=i((()=>(0,a._)("span",{class:"nutrition-display-hint"},"carbs",-1))),h={class:"nutri-goal-is"},v={class:"opacity-5"},w={class:"row nutri-goal-container"},b=i((()=>(0,a._)("span",{class:"nutrition-display-hint"},"fat",-1)));function q(e,t,o,i,q,F){const D=(0,a.up)("q-card-section"),x=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(x,{class:"q-ma-md bg-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{class:"q-pb-md"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("h5",null,(0,n.zw)(Math.trunc(e.computedMacros.kcal))+" kcal",1)]),(0,a._)("div",r,[(0,a._)("div",{class:"bg-accent",style:(0,n.j5)({flex:e.computedMacros.kcal})},null,4),(0,a._)("div",{class:"bg-accent nutri-goal",style:(0,n.j5)({flex:e.kcalFlex,opacity:.2})},null,4)])])),_:1}),(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",{style:{flex:"1","text-align":"center"},class:(0,n.C_)({"opacity-5":e.computedMacros.protein>=e.goals.protein})},[(0,a._)("span",c,(0,n.zw)(Math.trunc(e.computedMacros.protein)),1),(0,a._)("span",d,(0,n.zw)("/"+e.goals.protein),1),(0,a._)("div",u,[(0,a._)("div",{class:"bg-green",style:(0,n.j5)({flex:e.computedMacros.protein})},null,4),(0,a._)("div",{class:(0,n.C_)(["bg-green-2 nutri-goal",{"opacity-3":e.$q.dark.isActive}]),style:(0,n.j5)({flex:e.proteinFlex})},null,6)]),p],2),(0,a._)("div",{class:(0,n.C_)({"opacity-5":e.computedMacros.carbs>=e.goals.carbs}),style:{flex:"1","text-align":"center"}},[(0,a._)("span",y,(0,n.zw)(Math.trunc(e.computedMacros.carbs)),1),(0,a._)("span",f,(0,n.zw)("/"+e.goals.carbs),1),(0,a._)("div",g,[(0,a._)("div",{class:"bg-orange",style:(0,n.j5)({flex:e.computedMacros.carbs})},null,4),(0,a._)("div",{class:(0,n.C_)(["bg-orange-2 nutri-goal",{"opacity-3":e.$q.dark.isActive}]),style:(0,n.j5)({flex:e.carbsFlex})},null,6)]),m],2),(0,a._)("div",{style:{flex:"1","text-align":"center"},class:(0,n.C_)({"opacity-5":e.computedMacros.fat>=e.goals.fat})},[(0,a._)("span",h,(0,n.zw)(Math.trunc(e.computedMacros.fat)),1),(0,a._)("span",v,(0,n.zw)("/"+e.goals.fat),1),(0,a._)("div",w,[(0,a._)("div",{class:"bg-red",style:(0,n.j5)({flex:e.computedMacros.fat})},null,4),(0,a._)("div",{class:(0,n.C_)(["bg-red-2 nutri-goal",{"opacity-3":e.$q.dark.isActive}]),style:(0,n.j5)({flex:e.fatFlex})},null,6)]),b],2)])])),_:1}),(0,a.WI)(e.$slots,"bottom",{},void 0,!0)])),_:3})}o(71);var F=o(1959);const D=(0,a.aZ)({name:"NutriDisplay",props:{food:Array},setup(){return{kcalFlex:(0,F.iH)(0),proteinFlex:(0,F.iH)(0),carbsFlex:(0,F.iH)(0),fatFlex:(0,F.iH)(0),computedMacros:{kcal:(0,F.iH)(0),protein:(0,F.iH)(0),carbs:(0,F.iH)(0),fat:(0,F.iH)(0)},goals:{kcal:(0,F.iH)(2e3),protein:(0,F.iH)(200),carbs:(0,F.iH)(175),fat:(0,F.iH)(55)}}},created(){this.updateGoals(),this.updateDisplay()},methods:{getGrFromPercent(e,t,o){return(e/100*t/o).toFixed(0)},updateGoals(){let e=parseInt(localStorage.getItem("goal-kcal")||2500),t=this.getGrFromPercent(e,parseInt(localStorage.getItem("goal-protein")||27),4.1),o=this.getGrFromPercent(e,parseInt(localStorage.getItem("goal-carbs")||48),4.1),a=this.getGrFromPercent(e,parseInt(localStorage.getItem("goal-fat")||25),9.3);this.goals={kcal:e,protein:t,carbs:o,fat:a}},updateDisplay(){this.computedMacros.kcal=0,this.computedMacros.protein=0,this.computedMacros.carbs=0,this.computedMacros.fat=0;for(let e of this.food)this.computedMacros.kcal+=e.macros.kcal*("meal"===e.type?e.quantity:e.unit.value*e.quantity/100),this.computedMacros.protein+=e.macros.protein*("meal"===e.type?e.quantity:e.unit.value*e.quantity/100),this.computedMacros.carbs+=e.macros.carbs*("meal"===e.type?e.quantity:e.unit.value*e.quantity/100),this.computedMacros.fat+=e.macros.fat*("meal"===e.type?e.quantity:e.unit.value*e.quantity/100);this.kcalFlex=Math.max(this.goals.kcal-this.computedMacros.kcal,0),this.proteinFlex=Math.max(this.goals.protein-this.computedMacros.protein,0),this.carbsFlex=Math.max(this.goals.carbs-this.computedMacros.carbs,0),this.fatFlex=Math.max(this.goals.fat-this.computedMacros.fat,0)}},watch:{food:{deep:!0,handler(){this.updateDisplay()}}}});var x=o(4260),_=o(151),k=o(5589),C=o(7518),I=o.n(C);const S=(0,x.Z)(D,[["render",q],["__scopeId","data-v-dcdc1f0c"]]),j=S;I()(D,"components",{QCard:_.Z,QCardSection:k.Z})},9266:(e,t,o)=>{"use strict";o.d(t,{Z:()=>w});var a=o(3673);const n={class:"col q-pa-md"},i={class:"col q-px-md q-pb-md"},l={class:"row q-px-md q-pb-md"},r={class:"col"},s={class:"col q-px-xs"},c={class:"col"};function d(e,t,o,d,u,p){const y=(0,a.up)("q-input"),f=(0,a.up)("fb-popup-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(f,{actions:"cancel-save",ref:"createIngredientDialog",onSave:e.saveIngredient,title:"Create Ingredient"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(y,{filled:"",autofocus:"",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),label:"Name",tabindex:1},null,8,["modelValue"])]),(0,a._)("div",i,[(0,a.Wm)(y,{filled:"",dense:"",modelValue:e.kcal,"onUpdate:modelValue":t[1]||(t[1]=t=>e.kcal=t),label:"Calories",type:"number",tabindex:2},null,8,["modelValue"])]),(0,a._)("div",l,[(0,a._)("div",r,[(0,a.Wm)(y,{filled:"",dense:"",modelValue:e.protein,"onUpdate:modelValue":t[2]||(t[2]=t=>e.protein=t),label:"Protein",tabindex:3,type:"number"},null,8,["modelValue"])]),(0,a._)("div",s,[(0,a.Wm)(y,{filled:"",dense:"",modelValue:e.carbs,"onUpdate:modelValue":t[3]||(t[3]=t=>e.carbs=t),label:"Carbs",tabindex:4,type:"number"},null,8,["modelValue"])]),(0,a._)("div",c,[(0,a.Wm)(y,{filled:"",dense:"",modelValue:e.fat,"onUpdate:modelValue":t[4]||(t[4]=t=>e.fat=t),label:"Fat",tabindex:5,type:"number"},null,8,["modelValue"])])])])),_:1},8,["onSave"])])}var u=o(1959),p=o(3152);const y=(0,a.aZ)({props:{food:Object},setup(){return{name:(0,u.iH)(""),kcal:(0,u.iH)(""),protein:(0,u.iH)(""),carbs:(0,u.iH)(""),fat:(0,u.iH)("")}},methods:{open(){this.$refs.createIngredientDialog.open()},close(){this.$refs.createIngredientDialog.close()},resetFields(){this.name="",this.kcal="",this.protein="",this.carbs="",this.fat=""},saveIngredient(){if(""!==this.name&&""!==this.kcal&&""!==this.protein&&""!==this.carbs&&""!==this.fat){const e={name:this.name,user:"foodbase",macros:{kcal:parseFloat(this.kcal),protein:parseFloat(this.protein),carbs:parseFloat(this.carbs),fat:parseFloat(this.fat)}};(0,p.saveIngredient)(e).then((()=>{this.$emit("created",e),this.resetFields()}))}}}});var f=o(4260),g=o(5641),m=o(7518),h=o.n(m);const v=(0,f.Z)(y,[["render",d]]),w=v;h()(y,"components",{QInput:g.Z})},7136:(e,t,o)=>{"use strict";o.d(t,{Z:()=>A});var a=o(3673),n=o(2323);const i={key:0},l={key:0,class:"q-pa-md"},r={key:0},s={key:1},c=(0,a._)("div",{class:"flex flex-center"},"No ingredients added yet.",-1),d=[c],u={key:1,class:"q-pa-md"},p={class:"row text-black"},y={class:"col bg-orange-3 border-radius-top"},f={class:"row justify-center opacity-9"},g={class:"row text-black"},m={class:"col bg-green-3"},h={class:"row justify-center opacity-8"},v={class:"col bg-orange-3"},w={class:"row justify-center opacity-8"},b={class:"col bg-red-3"},q={class:"row justify-center opacity-8"};function F(e,t,o,c,F,D){const x=(0,a.up)("fb-popup-dialog"),_=(0,a.up)("DeleteDialog"),k=(0,a.up)("q-spinner-tail"),C=(0,a.up)("q-inner-loading");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(x,{actions:e.edit?"edit-add":e.add?"delete-add":"delete-only",ref:"foodDetailsDialog",onDelete:e.deleteFood,onEdit:t[0]||(t[0]=t=>e.$emit("edit")),onAdd:t[1]||(t[1]=t=>e.$emit("add")),title:e.title},{default:(0,a.w5)((()=>[null!==e.food?((0,a.wg)(),(0,a.iD)("div",i,["meal"===e.food.type&&e.food.ingredients?((0,a.wg)(),(0,a.iD)("div",l,[e.food.ingredients.length>0?((0,a.wg)(),(0,a.iD)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.food.ingredients,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("strong",null,(0,n.zw)(e.quantity?`${e.quantity.toFixed(0)} ${e.unit.name} `:"100 gr/ml "),1),(0,a.Uk)((0,n.zw)(e.name),1)])))),128))])):((0,a.wg)(),(0,a.iD)("div",s,d))])):((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("strong",null,(0,n.zw)(e.food.quantity?`${e.food.quantity.toFixed(0)} ${e.food.unit.name} `:"100 gr/ml "),1),(0,a.Uk)((0,n.zw)(e.food.name),1)]))])):(0,a.kq)("",!0),(0,a._)("div",p,[(0,a._)("div",y,[(0,a._)("div",f,(0,n.zw)(e.food.macros.kcal.toFixed(0))+" kcal ",1)])]),(0,a._)("div",g,[(0,a._)("div",m,[(0,a._)("div",h,(0,n.zw)(e.food.macros.protein.toFixed(0))+" gr ",1)]),(0,a._)("div",v,[(0,a._)("div",w,(0,n.zw)(e.food.macros.carbs.toFixed(0))+" gr ",1)]),(0,a._)("div",b,[(0,a._)("div",q,(0,n.zw)(e.food.macros.fat.toFixed(0))+" gr ",1)])])])),_:1},8,["actions","onDelete","title"]),(0,a.Wm)(_,{ref:"deleteDialog",onConfirm:e.deleteFoodAndClose,food:e.food},null,8,["onConfirm","food"]),(0,a.Wm)(C,{showing:e.loading},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{size:"100px",color:"primary"})])),_:1},8,["showing"])])}var D=o(1959);const x={key:0,class:"flex flex-center q-pa-md"},_=(0,a.Uk)(' Delete "'),k=(0,a.Uk)('"? ');function C(e,t,o,i,l,r){const s=(0,a.up)("fb-popup-dialog");return(0,a.wg)(),(0,a.j4)(s,{ref:"confirmDeleteDialog",actions:"cancel-delete",onDelete:e.deleteAndClose,title:"Confirm"},{default:(0,a.w5)((()=>[null!==e.food?((0,a.wg)(),(0,a.iD)("div",x,[_,(0,a._)("strong",null,(0,n.zw)(e.food.name),1),k])):(0,a.kq)("",!0)])),_:1},8,["onDelete"])}const I=(0,a.aZ)({props:{food:Object},setup(){return{}},methods:{deleteAndClose(){this.$emit("confirm"),this.close()},open(){this.$refs.confirmDeleteDialog.open()},close(){this.$refs.confirmDeleteDialog.close()}}});var S=o(4260);const j=(0,S.Z)(I,[["render",C]]),B=j,$=(0,a.aZ)({name:"DialogFoodDetails",components:{DeleteDialog:B},props:{food:Object,add:{type:Boolean,default:!1},edit:{type:Boolean,default:!1},noconfirm:{type:Boolean,default:!1}},setup(){return{loading:(0,D.iH)(!1)}},methods:{open(){this.$refs.foodDetailsDialog.open()},close(){this.$refs.foodDetailsDialog.close()},deleteFood(){this.noconfirm?this.deleteFoodAndClose():this.confirmDelete()},confirmDelete(){this.$refs.deleteDialog.open()},deleteFoodAndClose(){this.$emit("delete",this.food),this.close()}},computed:{title(){return this.food?this.quantityText+" "+this.food.name:""},quantityText(){if(!this.food)return"";let e=this.food.quantity&&this.food.quantity%1<=.01?0:2;return"meal"===this.food.type?this.food.quantity?this.food.quantity.toFixed(e)+"x":"":this.food.quantity?this.food.quantity.toFixed(e)+" "+this.food.unit.name:""}}});var M=o(6941),Z=o(682),H=o(7518),z=o.n(H);const P=(0,S.Z)($,[["render",F]]),A=P;z()($,"components",{QInnerLoading:M.Z,QSpinnerTail:Z.Z})},6192:(e,t,o)=>{"use strict";o.d(t,{Z:()=>y});var a=o(3673);const n={key:0,class:"col q-pa-md"};function i(e,t,o,i,l,r){const s=(0,a.up)("q-input"),c=(0,a.up)("fb-popup-dialog");return(0,a.wg)(),(0,a.j4)(c,{ref:"selectQuantityDialog",actions:"cancel-add",onAdd:e.addFood,title:"Choose quantity"},{default:(0,a.w5)((()=>[null!==e.food?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(s,{filled:"",dense:"",modelValue:e.qty,"onUpdate:modelValue":t[0]||(t[0]=t=>e.qty=t),hint:e.hint,placeholder:e.placeholder,type:"number"},null,8,["modelValue","hint","placeholder"])])):(0,a.kq)("",!0)])),_:1},8,["onAdd"])}o(2100);var l=o(1959);const r=(0,a.aZ)({props:{food:Object},setup(){return{hint:(0,l.iH)(""),placeholder:(0,l.iH)(""),qty:(0,l.iH)("")}},methods:{open(){this.$refs.selectQuantityDialog.open()},close(){this.qty="",this.$refs.selectQuantityDialog.close()},addFood(){let e=JSON.parse(JSON.stringify(this.food));try{let t=""===this.qty?parseFloat(this.placeholder):parseFloat(this.qty);if(t<=0)return void this.$q.notify({type:"warning",message:"Please select a valid quantity."});e.quantity=t}catch(t){this.$q.notify({type:"bad",message:"Invalid quantity!"})}this.$emit("save",e),this.close()}},watch:{food:{deep:!0,handler(){this.hint="meal"===this.food.type?"pc.":this.food.unit.name,this.placeholder="meal"===this.food.type?"1":this.food.default_quantity?this.food.default_quantity:"100"}}}});var s=o(4260),c=o(5641),d=o(7518),u=o.n(d);const p=(0,s.Z)(r,[["render",i]]),y=p;u()(r,"components",{QInput:c.Z})},5350:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var a=o(3673),n=o(2323);const i={class:"q-px-md fit row wrap justify-start items-stretch content-stretch"},l=["onClick"];function r(e,t,o,r,s,c){return(0,a.wg)(),(0,a.iD)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.items,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"col-grow",key:t.name,onClick:o=>e.$emit("selected",t)},[(0,a._)("div",{class:(0,n.C_)(["shadow-2 cat cat-size q-pa-sm q-ma-xs",""+(t.color?"cat-"+t.color:"bg-primary")])},[(0,a._)("div",{class:(0,n.C_)(["row justify-center text-h3 pacifico",{"text-accent":!t.color}])},(0,n.zw)(t.name[0]),3),(0,a._)("div",{class:(0,n.C_)(["row justify-center hide-overflow",{"text-accent":!t.color}])},(0,n.zw)(t.name),3)],2)],8,l)))),128))])}const s=(0,a.aZ)({name:"CategoryGrid",props:{items:{type:Array,default:()=>[]}}});var c=o(4260);const d=(0,c.Z)(s,[["render",r]]),u=d},3372:(e,t,o)=>{"use strict";o.d(t,{Z:()=>h});var a=o(3673),n=o(2323);const i=e=>((0,a.dD)("data-v-71ad7f6c"),e=e(),(0,a.Cn)(),e),l={class:"row justify-center opacity-5"},r={class:"empty-entry col row items-center justify-center"},s={class:"q-pl-sm text-accent"},c=i((()=>(0,a._)("div",{class:"row justify-center"},null,-1)));function d(e,t,o,i,d,u){const p=(0,a.up)("q-icon");return(0,a.wg)(),(0,a.iD)("div",{onClick:t[0]||(t[0]=t=>e.$emit("click"))},[(0,a._)("div",l,[(0,a._)("div",r,[(0,a.Wm)(p,{size:"lg",color:"accent",name:"add"}),(0,a._)("div",s,(0,n.zw)(e.msg),1)])]),c])}const u=(0,a.aZ)({name:"EmptyListEntry",props:{msg:{type:String,default:"Nothing found here!"},long:{type:Boolean,default:!1}},setup(){return{}}});var p=o(4260),y=o(4554),f=o(7518),g=o.n(f);const m=(0,p.Z)(u,[["render",d],["__scopeId","data-v-71ad7f6c"]]),h=m;g()(u,"components",{QIcon:y.Z})},7783:(e,t,o)=>{"use strict";o.d(t,{Z:()=>x});var a=o(3673),n=o(2323);const i={key:0},l={class:"q-pa-md"},r={class:"q-my-sm q-mr-sm q-ml-md nowrap"},s={key:0,class:"q-mr-xs text-bold"},c={class:""},d={class:""},u={key:0,class:"q-my-xs q-ml-xs q-mr-md row items-end",style:{"min-width":"30px"}},p={key:1,class:"q-my-xs q-ml-xs q-mr-md row items-center"},y={key:1,class:"q-pa-md"};function f(e,t,o,f,g,m){const h=(0,a.up)("q-space"),v=(0,a.up)("q-item"),w=(0,a.up)("q-separator"),b=(0,a.up)("EmptyListEntry");return(0,a.wg)(),(0,a.iD)("div",null,[e.filteredFood&&e.filteredFood.length>0?((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filteredFood,((t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a.Wm)(v,{dense:"",clickable:"",class:(0,n.C_)(["q-px-none q-py-xs bg-primary",{"rounded-corners":1===e.filteredFood.length,"rounded-corners-top":e.filteredFood.length>1&&0===o,"rounded-corners-bottom":e.filteredFood.length>1&&o===e.filteredFood.length-1}]),onClick:o=>e.$emit("selected",t)},{default:(0,a.w5)((()=>[(0,a._)("div",r,[e.quantity?((0,a.wg)(),(0,a.iD)("span",s,(0,n.zw)(e.quantityText(t)),1)):(0,a.kq)("",!0),(0,a._)("span",c,(0,n.zw)(t.name),1),(0,a._)("span",d,(0,n.zw)(void 0===t.brand||null===t.brand?"":` (${t.brand})`),1)]),(0,a.Wm)(h),"chart"==e.type?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",{class:"col bg-green rounded",style:(0,n.j5)({width:"10px",height:e.proteinHeight(t.macros)})},null,4),(0,a._)("div",{class:"col bg-orange rounded",style:(0,n.j5)({width:"10px",height:e.carbsHeight(t.macros)})},null,4),(0,a._)("div",{class:"col bg-red rounded",style:(0,n.j5)({width:"10px",height:e.fatHeight(t.macros)})},null,4)])):(0,a.kq)("",!0),"text"==e.type?((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",null,(0,n.zw)(`${e.calories(t)} / ${e.protein(t)}`),1)])):(0,a.kq)("",!0)])),_:2},1032,["onClick","class"]),o!==e.filteredFood.length-1?((0,a.wg)(),(0,a.j4)(w,{key:0,color:"accent",class:"opacity-3"})):(0,a.kq)("",!0)])))),128))])])):((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(b,{long:"",msg:"Add food",onClick:t[0]||(t[0]=t=>e.$emit("add"))})]))])}o(71);var g=o(3372);const m=(0,a.aZ)({name:"FoodList",components:{EmptyListEntry:g.Z},props:{food:{type:Array,default:()=>[]},foodAlt:{type:Array,default:()=>[]},quantity:{type:Boolean,default:!1},type:{type:String,default:"text"},search:{type:String,default:""}},computed:{filteredFood(){if(""==this.search)return this.food;let e=this.search.toLowerCase().split(" "),t=[];for(let o of this.food)for(let a of e)if(""!=a&&o.name.toLowerCase().includes(a)){t.push(o);break}return t}},methods:{calories(e){return(e.macros.kcal*(e.quantity||1)).toFixed(0),"meal"===e.type?(e.macros.kcal*e.quantity).toFixed(0):(e.macros.kcal*(e.unit.value*e.quantity/100)).toFixed(0)},protein(e){return(e.macros.protein*(e.quantity||1)).toFixed(0),"meal"===e.type?(e.macros.protein*e.quantity).toFixed(0):(e.macros.protein*(e.unit.value*e.quantity/100)).toFixed(0)},quantityText(e){return"meal"===e.type?e.quantity+"x":e.quantity+" "+e.unit.name},proteinHeight(e){return`${Math.max(100/(e.protein+e.carbs+e.fat)*e.protein,1)}%`},carbsHeight(e){return`${Math.max(100/(e.protein+e.carbs+e.fat)*e.carbs,1)}%`},fatHeight(e){return`${Math.max(100/(e.protein+e.carbs+e.fat)*e.fat,1)}%`}}});var h=o(4260),v=o(3414),w=o(2025),b=o(5869),q=o(7518),F=o.n(q);const D=(0,h.Z)(m,[["render",f]]),x=D;F()(m,"components",{QItem:v.Z,QSpace:w.Z,QSeparator:b.Z})}}]);