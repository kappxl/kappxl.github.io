"use strict";(self["webpackChunkfoodbase_app"]=self["webpackChunkfoodbase_app"]||[]).push([[840],{6906:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Q});var a=t(3673),l=t(2323);const s={class:"row justify-center"},i={class:"col",style:{"max-width":"650px"}},d={class:"row items-center q-pa-lg"},c={class:"row items-center q-pa-lg"},n=(0,a._)("span",{class:"text-accent"},"Add Food",-1),r={class:"q-pt-md"},m={key:0},p={key:1,class:"q-pa-md"},u=["onClick"];function h(e,o,t,h,g,f){const C=(0,a.up)("q-btn"),y=(0,a.up)("fb-header"),w=(0,a.up)("q-input"),v=(0,a.up)("q-separator"),_=(0,a.up)("CategoryGrid"),k=(0,a.up)("EmptyListEntry"),q=(0,a.up)("q-card-section"),D=(0,a.up)("q-card"),S=(0,a.up)("q-dialog"),W=(0,a.up)("SMDialog"),b=(0,a.up)("fb-layout");return(0,a.wg)(),(0,a.j4)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{title:e.title},{left:(0,a.w5)((()=>[(0,a.Wm)(C,{round:"",icon:"arrow_back_ios",flat:"",size:"sm",color:"accent",rounded:"",onClick:o[0]||(o[0]=o=>e.$router.go(-1))})])),right:(0,a.w5)((()=>[(0,a.Wm)(C,{flat:"",label:"save",onClick:e.saveCat,color:"accent"},null,8,["onClick"])])),_:1},8,["title"]),(0,a._)("div",s,[(0,a._)("div",i,[(0,a._)("div",d,[(0,a._)("div",{class:(0,l.C_)(["dot",`cat-${e.color}`]),onClick:o[1]||(o[1]=o=>e.dialogColor=!0)},null,2),(0,a.Wm)(w,{class:"col q-pl-lg",dense:"",hint:"Name of Category",placeholder:"e.g. Wraps, Shakes, Breakfast ...",modelValue:e.catName,"onUpdate:modelValue":o[2]||(o[2]=o=>e.catName=o)},null,8,["modelValue"])]),(0,a._)("div",c,[n,(0,a.Wm)(v,{class:"q-mx-md col",color:"accent"}),(0,a._)("div",null,[(0,a.Wm)(C,{color:"accent","text-color":"primary",round:"",dense:"",icon:"add",onClick:e.openSMDialog},null,8,["onClick"])])]),(0,a._)("div",r,[e.food.length>0?((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(_,{items:e.food,onSelected:e.removeFood},null,8,["items","onSelected"])])):((0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(k,{long:"",msg:"Add meal",onClick:e.openSMDialog},null,8,["onClick"])]))])])]),(0,a.Wm)(S,{modelValue:e.dialogColor,"onUpdate:modelValue":o[3]||(o[3]=o=>e.dialogColor=o)},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{class:"transparent no-shadow",style:{"min-width":"300px","max-width":"650px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{class:"q-gutter-xl row justify-center items-center"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.colors,(o=>((0,a.wg)(),(0,a.iD)("div",{class:(0,l.C_)(["dot",`cat-${o}`]),key:o,onClick:t=>e.setColor(o)},null,10,u)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(W,{onSelected:e.addFood,ref:"smDialog"},null,8,["onSelected"])])),_:1})}var g=t(1959),f=t(5350),C=t(3372);const y={class:"col q-pa-md"};function w(e,o,t,l,s,i){const d=(0,a.up)("q-icon"),c=(0,a.up)("q-input"),n=(0,a.up)("MacroFoodList"),r=(0,a.up)("fb-bottom-dialog");return(0,a.wg)(),(0,a.j4)(r,{back:"",title:"Select Meal",ref:"mealBottomDialog"},{default:(0,a.w5)((()=>[(0,a._)("div",y,[(0,a.Wm)(c,{rounded:"",outlined:"",dense:"",modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=o=>e.search=o),placeholder:"Search meals",class:"full-width",color:"accent"},{append:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"search"})])),_:1},8,["modelValue"])]),(0,a._)("div",null,[(0,a.Wm)(n,{food:e.meals,search:e.search,onSelected:e.addMeal,type:"chart"},null,8,["food","search","onSelected"])])])),_:1},512)}var v=t(7783),_=t(3152);const k=(0,a.aZ)({name:"SelectMealDialog",components:{MacroFoodList:v.Z},props:{dialogModel:Boolean},setup(){return{search:(0,g.iH)(""),meals:(0,g.iH)([]),selectedFood:(0,g.iH)({})}},created(){this.fetchData()},methods:{open(){this.$refs.mealBottomDialog.open()},close(){this.$refs.mealBottomDialog.close()},addMeal(e){this.$emit("selected",e),this.$refs.mealBottomDialog.close()},fetchData(){(0,_.getMeals)().then((e=>{this.meals=e}))}}});var q=t(4260),D=t(5641),S=t(4554),W=t(7518),b=t.n(W);const M=(0,q.Z)(k,[["render",w]]),Z=M;b()(k,"components",{QInput:D.Z,QIcon:S.Z});var $=t(3448);const H=(0,a.aZ)({name:"CreateCategory",components:{CategoryGrid:f.Z,SMDialog:Z,EmptyListEntry:C.Z},props:{cat:{type:String,default:null}},setup(){return{title:(0,g.iH)("Create Category"),dialogColor:(0,g.iH)(!1),food:(0,g.iH)([]),catId:(0,g.iH)(null),catName:(0,g.iH)(""),color:(0,g.iH)("red"),colors:(0,g.iH)(["red","pink","purple","deep-purple","indigo","blue","cyan","teal","green","lime","orange","deep-orange"])}},mounted(){if(this.cat){this.title="Edit Category";let e=JSON.parse(this.cat);(0,_.getFoodByIds)(e.foodIds).then((o=>{this.catId=e.id,this.catName=e.name,this.color=e.color,this.food=o}))}else this.title="Create Category",this.color=this.colors[Math.floor(Math.random()*this.colors.length)]},methods:{addFood(e){let o=this.food.find((o=>o.id===e.id));o?console.log("Already added: "+e.name):(this.food.push(e),console.log("Added: "+e.name))},openSMDialog(){this.$refs.smDialog.open()},removeFood(e){this.food=this.food.filter((o=>!(o.id===e.id)))},setColor(e){this.color=e,this.dialogColor=!1},saveCat(){if(""!==this.catName){let e={id:this.catId,name:this.catName,color:this.color,food:this.food};(0,$.saveCategory)(e).then((()=>{this.$router.push({name:"food",params:{tabProp:"Categories"}}),this.$q.notify({type:"good",message:`"${this.catName}" saved!`})})).catch((e=>{this.$q.notify({type:"bad",message:"Failed to save category!"})}))}else this.$q.notify({type:"warning",message:"Name is required."})}}});var F=t(4607),N=t(5869),x=t(5926),V=t(151),B=t(5589);const I=(0,q.Z)(H,[["render",h]]),Q=I;b()(H,"components",{QBtn:F.Z,QInput:D.Z,QSeparator:N.Z,QDialog:x.Z,QCard:V.Z,QCardSection:B.Z})}}]);