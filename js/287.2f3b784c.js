"use strict";(self["webpackChunkfoodbase_app"]=self["webpackChunkfoodbase_app"]||[]).push([[287],{5287:(e,l,t)=>{t.r(l),t.d(l,{default:()=>W});var a=t(3673);const n={class:"row justify-center"},i={class:"q-pa-lg",style:{"max-width":"650px"}},o={class:"q-pt-sm q-pb-lg q-px-sm"},d={class:"q-pt-none q-pb-lg q-px-sm"},s={class:"row q-pt-none q-px-sm"},r={class:"col flex flex-center q-pa-none"},u={class:"col flex flex-center q-py-none q-px-sm"},m={class:"col flex flex-center q-pa-none"};function p(e,l,t,p,c,h){const f=(0,a.up)("q-btn"),b=(0,a.up)("fb-header"),M=(0,a.up)("q-input"),g=(0,a.up)("q-card-section"),y=(0,a.up)("q-card"),q=(0,a.up)("q-expansion-item"),V=(0,a.up)("q-list"),x=(0,a.up)("q-spinner-tail"),w=(0,a.up)("q-inner-loading"),k=(0,a.up)("fb-bottom-actions"),_=(0,a.up)("fb-layout");return(0,a.wg)(),(0,a.j4)(_,null,{header:(0,a.w5)((()=>[(0,a.Wm)(b,{title:"Create Ingredient"},{left:(0,a.w5)((()=>[(0,a.Wm)(f,{round:"",icon:"arrow_back_ios",flat:"",size:"sm",color:"accent",rounded:"",onClick:l[0]||(l[0]=l=>e.$router.go(-1))})])),right:(0,a.w5)((()=>[e.id?((0,a.wg)(),(0,a.j4)(f,{key:0,round:"",icon:"delete",flat:"",class:"q-pr-md",color:"red",size:"md",rounded:"",onClick:e.deleteIngredient},null,8,["onClick"])):((0,a.wg)(),(0,a.j4)(f,{key:1,flat:"",label:"save",onClick:e.storeIngredient,color:"accent"},null,8,["onClick"]))])),_:1})])),footer:(0,a.w5)((()=>[(0,a.Wm)(k,{onCancel:l[9]||(l[9]=l=>e.$router.push({name:"food",params:{tabProp:"Ingredients"}})),onSave:e.storeIngredient},null,8,["onSave"])])),default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",i,[(0,a._)("div",o,[(0,a.Wm)(M,{filled:"",autofocus:"",modelValue:e.nameModel,"onUpdate:modelValue":l[1]||(l[1]=l=>e.nameModel=l),label:"Name",tabindex:1},null,8,["modelValue"])]),(0,a._)("div",d,[(0,a.Wm)(M,{filled:"",dense:"",modelValue:e.kcalModel,"onUpdate:modelValue":l[2]||(l[2]=l=>e.kcalModel=l),label:"Calories",type:"number",tabindex:2},null,8,["modelValue"])]),(0,a._)("div",s,[(0,a._)("div",r,[(0,a.Wm)(M,{filled:"",dense:"",modelValue:e.proteinModel,"onUpdate:modelValue":l[3]||(l[3]=l=>e.proteinModel=l),label:"Protein",tabindex:3,type:"number"},null,8,["modelValue"])]),(0,a._)("div",u,[(0,a.Wm)(M,{filled:"",dense:"",modelValue:e.carbsModel,"onUpdate:modelValue":l[4]||(l[4]=l=>e.carbsModel=l),label:"Carbs",tabindex:4,type:"number"},null,8,["modelValue"])]),(0,a._)("div",m,[(0,a.Wm)(M,{filled:"",dense:"",modelValue:e.fatModel,"onUpdate:modelValue":l[5]||(l[5]=l=>e.fatModel=l),label:"Fat",tabindex:5,type:"number"},null,8,["modelValue"])])]),(0,a.Wm)(V,{padding:"",bordered:"",class:"bg-primary rounded-borders q-mx-sm q-mt-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{label:"Optional"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{filled:"",dense:"",modelValue:e.defQuantityModel,"onUpdate:modelValue":l[6]||(l[6]=l=>e.defQuantityModel=l),label:"Default quantity",suffix:"gr",tabindex:6,type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(g,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{class:"col q-pr-xs",filled:"",dense:"",modelValue:e.unitNameModel,"onUpdate:modelValue":l[7]||(l[7]=l=>e.unitNameModel=l),label:"Unit",placeholder:"gr, pc, ml, ...",tabindex:6,type:"string"},null,8,["modelValue"]),(0,a.Wm)(M,{class:"col q-pl-xs",filled:"",dense:"",modelValue:e.unitValueModel,"onUpdate:modelValue":l[8]||(l[8]=l=>e.unitValueModel=l),label:"Gram/unit",placeholder:"1",tabindex:6,type:"number"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,a.Wm)(w,{showing:e.loading},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"100px",color:"primary"})])),_:1},8,["showing"])])])),_:1})}t(9544);var c=t(1959),h=t(3152);const f=(0,a.aZ)({name:"CreateIngredient",props:{id:{type:String,default:null},name:String,kcal:String,protein:String,carbs:String,fat:String},setup(){return{loading:(0,c.iH)(!1),nameModel:(0,c.iH)(""),kcalModel:(0,c.iH)(""),proteinModel:(0,c.iH)(""),carbsModel:(0,c.iH)(""),fatModel:(0,c.iH)(""),defQuantityModel:(0,c.iH)(100),unitNameModel:(0,c.iH)("gr"),unitValueModel:(0,c.iH)(1)}},mounted(){this.id&&this.getIngredient(this.id),this.name&&(this.nameModel=this.name),this.kcal&&(this.kcalModel=this.kcal),this.protein&&(this.proteinModel=this.protein),this.carbs&&(this.carbsModel=this.carbs),this.fat&&(this.fatModel=this.fat)},methods:{getIngredient(e){this.loading=!0,(0,h.getFood)({id:e}).then((e=>{this.nameModel=e.name,this.kcalModel=e.macros.kcal,this.proteinModel=e.macros.protein,this.carbsModel=e.macros.carbs,this.fatModel=e.macros.fat,this.defQuantityModel=e.default_quantity,this.unitNameModel=e.unit.name,this.unitValueModel=e.unit.value})).finally((()=>this.loading=!1))},storeIngredient(){if(""===this.nameModel||""===this.kcalModel||""===this.proteinModel||""===this.carbsModel||""===this.fatModel)this.$q.notify({type:"warning",message:"Please fill all required fields."});else{let l=parseInt(this.defQuantityModel)<1?100:this.defQuantityModel;var e={id:this.id,name:this.nameModel,user:"foodbase",macros:{kcal:parseFloat(this.kcalModel),protein:parseFloat(this.proteinModel),carbs:parseFloat(this.carbsModel),fat:parseFloat(this.fatModel)},default_quantity:parseInt(l),unit:{name:""===this.unitNameModel?"gr":this.unitNameModel,value:""===this.unitValueModel?1:this.unitValueModel}};(0,h.saveIngredient)(e).then((()=>{this.$router.push({name:"food",params:{tabProp:"Ingredients"}}),this.$q.notify({type:"good",message:`"${this.nameModel}" saved!`})})).catch((e=>{this.$q.notify({type:"bad",message:`Failed to save "${this.nameModel}"!`})}))}},deleteIngredient(){this.id&&(this.loading=!0,(0,h.deleteFood)({id:this.id}).then((async()=>{await(0,h.deleteFoodFromAllMeals)({id:this.id}),this.$router.push({name:"food",params:{tabProp:"Ingredients"}}),this.$q.notify({type:"good",message:`"${this.nameModel}" deleted!`})})).catch((e=>{this.$q.notify({type:"bad",message:`Failed to delete "${this.nameModel}"!`})})).finally((()=>this.loading=!1)))}}});var b=t(4260),M=t(4607),g=t(5641),y=t(7011),q=t(4615),V=t(151),x=t(5589),w=t(6941),k=t(682),_=t(7518),v=t.n(_);const I=(0,b.Z)(f,[["render",p]]),W=I;v()(f,"components",{QBtn:M.Z,QInput:g.Z,QList:y.Z,QExpansionItem:q.Z,QCard:V.Z,QCardSection:x.Z,QInnerLoading:w.Z,QSpinnerTail:k.Z})}}]);